"use strict";(self.webpackChunkwcf_addons=self.webpackChunkwcf_addons||[]).push([[567],{567:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var l=a(1609),n=a(1632),s=a(2704),c=a(1530),o=a(3888),r=a(8645),i=a(4718),d=a(5107),m=a(3315),p=a(2735),u=a(424),g=a(9526),h=a(9402),w=a(6611),E=()=>{var e;const{updateTabKey:t}=(0,s.Vh)(),{allPostTypes:a,setAllPostTypes:E}=(0,s.yl)(),[y,C]=(0,l.useState)([]),[v,S]=(0,l.useState)([]),[N,_]=(0,l.useState)({}),[b,f]=(0,l.useState)({}),x=(e,a)=>{const l=new URL(window.location.href),n=l.searchParams.get("page");l.hash="",l.search=`page=${n}`,l.searchParams.set("tab",e),l.searchParams.set("postId",a),window.history.replaceState({},"",l),t(e)},P=async e=>{try{await fetch(WCF_ADDONS_ADMIN.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:new URLSearchParams({action:"aae_delete_post_type_builder",post_type_id:e,nonce:WCF_ADDONS_ADMIN.nonce})}).then(e=>e.json()).then(e=>{E(e?.data)})}catch(e){console.log(e)}},k=[{id:"select",header:({table:e})=>(0,l.createElement)(p.S,{checked:e.getIsAllPageRowsSelected()||e.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:t=>e.toggleAllPageRowsSelected(!!t),"aria-label":"Select all"}),cell:({row:e})=>(0,l.createElement)(p.S,{checked:e.getIsSelected(),onCheckedChange:t=>e.toggleSelected(!!t),"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorKey:"post_title",header:({column:e})=>(0,l.createElement)(n.$,{variant:"link",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),className:"gap-3 px-0"},"Title",(0,l.createElement)(r.A,{size:16})),cell:({row:e})=>(0,l.createElement)("div",{className:"cursor-pointer hover:text-brand",onClick:()=>x("post-types-edit",e.original?.ID)},e.getValue("post_title"))},{accessorKey:"meta_data",header:"taxonomies",cell:({row:e})=>{const t=(0,w.Z)(a?.taxonomies)?.filter(t=>e.getValue("meta_data")?.taxonomies?.includes(t.value)).map(e=>e.label).join(", ");return(0,l.createElement)("div",null,t)}},{accessorKey:"meta_data",header:"Status",cell:({row:e})=>(0,l.createElement)("div",{className:"capitalize"},e.getValue("meta_data").active?"Active":"Inactive")},{id:"actions",enableHiding:!1,header:"Action",cell:({row:e})=>(0,l.createElement)(u.rI,null,(0,l.createElement)(u.ty,{asChild:!0},(0,l.createElement)(n.$,{variant:"link",className:"h-8 w-8 p-0"},(0,l.createElement)("span",{className:"sr-only"},"Open menu"),(0,l.createElement)(i.A,null))),(0,l.createElement)(u.SQ,{align:"end"},(0,l.createElement)(u._2,{onClick:()=>x("post-types-edit",e.original?.ID)},"Edit Post Title"),(0,l.createElement)(u._2,{onClick:e=>e.preventDefault()},(0,l.createElement)(m.A,{deleteFn:P,id:e.original?.ID},(0,l.createElement)("div",null,"Delete Post")))))}],A=(0,c.N4)({data:a?.data||[],columns:k,onSortingChange:C,onColumnFiltersChange:S,getCoreRowModel:(0,o.HT)(),getPaginationRowModel:(0,o.kW)(),getSortedRowModel:(0,o.h5)(),getFilteredRowModel:(0,o.hM)(),onColumnVisibilityChange:_,onRowSelectionChange:f,state:{sorting:y,columnFilters:v,columnVisibility:N,rowSelection:b}});return(0,l.createElement)("div",{className:"w-full"},(0,l.createElement)("div",{className:"flex items-center py-4"},(0,l.createElement)(g.p,{placeholder:"Filter Post Title...",value:null!==(e=A.getColumn("post_title")?.getFilterValue())&&void 0!==e?e:"",onChange:e=>A.getColumn("post_title")?.setFilterValue(e.target.value),className:"max-w-sm"}),(0,l.createElement)(u.rI,null,(0,l.createElement)(u.ty,{asChild:!0},(0,l.createElement)(n.$,{variant:"secondary",className:"ml-auto"},"Columns ",(0,l.createElement)(d.A,null))),(0,l.createElement)(u.SQ,{align:"end"},A.getAllColumns().filter(e=>e.getCanHide()).map(e=>(0,l.createElement)(u.hO,{key:e.id,className:"capitalize",checked:e.getIsVisible(),onCheckedChange:t=>e.toggleVisibility(!!t)},e.id))))),(0,l.createElement)("div",{className:"rounded-md border"},(0,l.createElement)(h.XI,null,(0,l.createElement)(h.A0,null,A.getHeaderGroups().map(e=>(0,l.createElement)(h.Hj,{key:e.id},e.headers.map(e=>(0,l.createElement)(h.nd,{key:e.id},e.isPlaceholder?null:(0,c.Kv)(e.column.columnDef.header,e.getContext())))))),(0,l.createElement)(h.BF,null,A.getRowModel().rows?.length?A.getRowModel().rows.map(e=>(0,l.createElement)(h.Hj,{key:e.id,"data-state":e.getIsSelected()&&"selected"},e.getVisibleCells().map(e=>(0,l.createElement)(h.nA,{key:e.id},(0,c.Kv)(e.column.columnDef.cell,e.getContext()))))):(0,l.createElement)(h.Hj,null,(0,l.createElement)(h.nA,{colSpan:k.length,className:"h-24 text-center"},"No results."))))),(0,l.createElement)("div",{className:"flex items-center justify-end space-x-2 py-4"},(0,l.createElement)("div",{className:"flex-1 text-sm text-muted-foreground"},A.getFilteredSelectedRowModel().rows.length," of"," ",A.getFilteredRowModel().rows.length," row(s) selected."),(0,l.createElement)("div",{className:"space-x-2"},(0,l.createElement)(n.$,{variant:"outline",size:"sm",onClick:()=>A.previousPage(),disabled:!A.getCanPreviousPage()},"Previous"),(0,l.createElement)(n.$,{variant:"outline",size:"sm",onClick:()=>A.nextPage(),disabled:!A.getCanNextPage()},"Next"))))},y=()=>{const{updateTabKey:e}=(0,s.Vh)(),{setAllPostTypes:t}=(0,s.yl)(),a=new URL(window.location.href);return(0,l.createElement)("div",{className:"min-h-[70vh] px-8 py-6 border rounded-2xl"},(0,l.createElement)("div",{className:"pb-6 border-b"},(0,l.createElement)("div",{className:"flex gap-11 justify-between items-center"},(0,l.createElement)("div",{className:"flex items-center"},(0,l.createElement)("h2",{className:"text-[18px] font-medium "},"Post Types")),(0,l.createElement)("div",null,(0,l.createElement)(n.$,{onClick:()=>(async()=>{try{await fetch(WCF_ADDONS_ADMIN.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:new URLSearchParams({action:"aae_add_or_update_new_post_type_builder",post_type_title:"New Post Type",nonce:WCF_ADDONS_ADMIN.nonce})}).then(e=>e.json()).then(l=>{t(l?.data);const n=a.searchParams.get("page");a.hash="",a.search=`page=${n}`,a.searchParams.set("tab","post-types-edit"),a.searchParams.set("postId",l?.data?.post),window.history.replaceState({},"",a),e("post-types-edit")})}catch(e){console.log(e)}})()},"Add New")))),(0,l.createElement)("div",{className:"mt-4"},(0,l.createElement)(E,null)))}}}]);