jQuery(window).on("elementor/frontend/init",function(){const e=elementorModules.frontend.handlers.Base.extend({getDefaultSettings:function(){return{selectors:{widgetContainer:".elementor-widget-container",postContentContainer:'.elementor:not([data-elementor-type="header"]):not([data-elementor-type="footer"]):not([data-elementor-type="popup"])',expandButton:".toc__toggle-button--expand",collapseButton:".toc__toggle-button--collapse",body:".toc__body",headerTitle:".toc__header-title"},classes:{anchor:"elementor-menu-anchor",listWrapper:"toc__list-wrapper",listItem:"toc__list-item",listTextWrapper:"toc__list-item-text-wrapper",firstLevelListItem:"toc__top-level",listItemText:"toc__list-item-text",activeItem:"elementor-item-active",headingAnchor:"toc__heading-anchor",collapsed:"toc--collapsed"},listWrapperTag:"numbers"===this.getElementSettings().marker_view?"ol":"ul"}},getDefaultElements:function(){const e=this.getSettings();return{$pageContainer:this.getContainer(),$widgetContainer:this.$element.find(e.selectors.widgetContainer),$expandButton:this.$element.find(e.selectors.expandButton),$collapseButton:this.$element.find(e.selectors.collapseButton),$tocBody:this.$element.find(e.selectors.body),$listItems:this.$element.find("."+e.classes.listItem)}},getContainer:function(){const e=this.getElementSettings();if(e.container)return jQuery(e.container);const t=this.$element.parents(".elementor");if("popup"===t.attr("data-elementor-type"))return t;const n=this.getSettings();return jQuery(n.selectors.postContentContainer)},getHeadings:function(){const e=this.getElementSettings(),t=e.headings_by_tags.join(","),n=this.getSettings("selectors"),s=e.exclude_headings_by_selector;return this.elements.$pageContainer.find(t).not(n.headerTitle).filter((e,t)=>("object"==typeof ScrollTrigger&&ScrollTrigger.create({trigger:t,start:"top center",end:"bottom center",onEnter:()=>this.setActiveLink(t.previousSibling.id),onLeaveBack:()=>this.setActiveLink(t.previousSibling.id)}),!jQuery(t).closest(s).length))},setActiveLink:function(e){for(const t of this.headingsData){let n=document.querySelector(`[href="#${t.anchorLink}"]`);n.classList.toggle("elementor-item-active",n.getAttribute("href")===`#${e}`)}},handleNoHeadingsFound:function(){return this.elements.$tocBody.html("No headings were found on this page.")},getHeadingAnchorLink:function(e,t){const n=this.elements.$headings[e].id,s=this.elements.$headings[e].closest(".elementor-widget").id;let i="";return n?i=n:s&&(i=s),n||s?jQuery(this.elements.$headings[e]).data("hasOwnID",!0):i=`${t.headingAnchor}-${e}`,i},setHeadingsData:function(){this.headingsData=[];const e=this.getSettings("classes");this.elements.$headings.each((t,n)=>{const s=this.getHeadingAnchorLink(t,e);this.headingsData.push({tag:+n.nodeName.slice(1),text:n.textContent,anchorLink:s})})},addAnchorsBeforeHeadings:function(){const e=this.getSettings("classes");this.elements.$headings.before(t=>{if(!jQuery(this.elements.$headings[t]).data("hasOwnID"))return`<span id="${e.headingAnchor}-${t}" class="${e.anchor} "></span>`})},followAnchors:function(){this.$listItemTexts=this.$element.find(".toc__list-item-text"),gsap.registerPlugin(ScrollToPlugin),this.$listItemTexts.toArray().forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const n=e.getAttribute("href");gsap.to(window,{duration:.6,scrollTo:n,ease:"power2.inOut"})})})},populateTOC:function(){this.listItemPointer=0,this.getElementSettings().hierarchical_view?this.createNestedList():this.createFlatList(),elementorFrontend.isEditMode()||this.followAnchors()},createNestedList:function(){this.headingsData.forEach((e,t)=>{e.level=0;for(let n=t-1;n>=0;n--){const t=this.headingsData[n];if(t.tag<=e.tag){e.level=t.level,t.tag<e.tag&&e.level++;break}}}),this.elements.$tocBody.html(this.getNestedLevel(0))},createFlatList:function(){this.elements.$tocBody.html(this.getNestedLevel())},getNestedLevel:function(e){const t=this.getSettings(),n=this.getElementSettings(),s=this.getElementSettings("icon");let i;s&&(i=elementorFrontend.config.experimentalFeatures.e_font_icon_svg&&!elementorFrontend.isEditMode()?s.rendered_tag:`<i class="${s.value}"></i>`);let o=`<${t.listWrapperTag} class="${t.classes.listWrapper}">`;for(;this.listItemPointer<this.headingsData.length;){const l=this.headingsData[this.listItemPointer];let a=t.classes.listItemText;if(0===l.level&&(a+=" "+t.classes.firstLevelListItem),e>l.level)break;if(e===l.level){o+=`<li class="${t.classes.listItem}">`,o+=`<div class="${t.classes.listTextWrapper}">`;let r=`<a href="#${l.anchorLink}" class="${a}">${l.text}</a>`;"bullets"===n.marker_view&&s&&(r=`${i}${r}`),o+=r,o+="</div>",this.listItemPointer++;const c=this.headingsData[this.listItemPointer];c&&e<c.level&&(o+=this.getNestedLevel(c.level)),o+="</li>"}}return o+=`</${t.listWrapperTag}>`,o},run:function(){if(this.elements.$headings=this.getHeadings(),!this.elements.$headings.length)return this.handleNoHeadingsFound();this.setHeadingsData(),elementorFrontend.isEditMode()||this.addAnchorsBeforeHeadings(),this.populateTOC(),this.getElementSettings("minimize_box")&&this.collapseBodyListener()},bindEvents:function(){this.viewportItems=[],this.run();const e=this.getElementSettings();e.minimize_box&&(this.elements.$expandButton.on("click",()=>this.expandBox()).on("keyup",e=>this.triggerClickOnEnterSpace(e)),this.elements.$collapseButton.on("click",()=>this.collapseBox()).on("keyup",e=>this.triggerClickOnEnterSpace(e))),e.collapse_subitems&&this.elements.$listItems.on("hover",e=>jQuery(e.target).slideToggle())},expandBox:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.getCurrentDeviceSetting("min_height");this.$element.removeClass(this.getSettings("classes.collapsed")),this.elements.$tocBody.attr("aria-expanded","true").slideDown(),this.elements.$widgetContainer.css("min-height",t.size+t.unit),e&&this.elements.$collapseButton.trigger("focus")},collapseBox:function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$element.addClass(this.getSettings("classes.collapsed")),this.elements.$tocBody.attr("aria-expanded","false").slideUp(),this.elements.$widgetContainer.css("min-height","0px"),e&&this.elements.$expandButton.trigger("focus")},triggerClickOnEnterSpace:function(e){13!==e.keyCode&&32!==e.keyCode||(e.currentTarget.click(),e.stopPropagation())},collapseBodyListener:function(){const e=elementorFrontend.breakpoints.getActiveBreakpointsList({withDesktop:!0}),t=this.getElementSettings("minimized_on"),n=elementorFrontend.getCurrentDeviceMode(),s=this.$element.hasClass(this.getSettings("classes.collapsed"));"desktop"===t||e.indexOf(t)>=e.indexOf(n)?s||this.collapseBox(!1):s&&this.expandBox(!1)}});elementorFrontend.hooks.addAction("frontend/element_ready/wcf--table-of-contents.default",function(t){elementorFrontend.elementsHandler.addHandler(e,{$element:t})})});